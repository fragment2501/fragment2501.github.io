---
title: Lombardi Notes 01dec2008
date: '2008-12-02T06:36:00.001-08:00'
author: Bryan
tags:
- Lombardi
modified_time: '2008-12-03T07:43:57.603-08:00'
thumbnail: http://lh3.ggpht.com/_It8-g3_9vec/STQ6vt3En4I/AAAAAAAAAl0/hqRRI4bgKwc/s72-c/1_empty.jpg
blogger_id: tag:blogger.com,1999:blog-19111454.post-5282285654165082790
blogger_orig_url: http://www.bryansgeekspeak.com/2008/12/lombardi-notes-01dec2008.html
---

<br /><br /> <br /> <br /> <br />Notes from dec 1 and 2, 2008<br><br>Lombardi Teamworks Suite, Business modeling<br><br />Class based off chapter 9 of the doc at www.bpmn.org<br><br /><br><br /><b>Buzzwords</b><br><br />BPMN (business process modeling notation) www.bpmn.org<br><br />BPD (business process definition)<br><br><u><b>Day 1</b></u><br><br><br />Focus on process modeling.&nbsp; Teamworks uses eclipse to design process models.<br><br /><br><br /><b>BPMN Flow Objects</b><br><br />- Events (start event, end event, intermediate events)<br><br />- Activities (tasks and processes)<br><br />- Gateways (decision, conditional, etc)<br><br />- flows (transitions from one thing to another)<br><br />- Pools and Lanes (allows roles to access activities - a security/access model)<br><br /><br><br /><b>Version Control</b><br><br />no built in version control until lombardi version 7<br><br />All "assets" can be exported as XML to be added to external source control<br><br /><br><br /><b>Gateways</b><br><br />Gateways are questions.<br><br />Gateways are made on outgoing sequence flow lines.&nbsp; <br><br />The order of the lines in the decision gateway is the order in which they will be evaluated.&nbsp; Very important for XOR gateways.<br><br />Gateway Split Types:<br><br /><div style="margin-left: 40px;">- Simple Split = parallel processing.&nbsp; Breaks a single process token into multiple process tokens, which continue down the path to complete their part of the workflow<br><br />- conditional (inclusive) = parallel processing. Breaks a single process into one or more other processes depending on conditions. <b>must have a default line.</b> All conditions matched are executed.<br><br />- decision (XOR) = only one condition is matched, looking at lines from top to bottom, only the first match runs.&nbsp; else, it runs default process.<br><br /></div><br /><br><br />Gateway Joins:<br><br />&nbsp;&nbsp;&nbsp; - simple join = waits for all process tokens to return from all lines connected.<br><br />&nbsp;&nbsp;&nbsp; - Conditional (smart) join = waits for all potential splits to return.&nbsp; Looks upstream to determine the proper amount of tokens to return.<br><br /><br><br /><b>TeamWorks Scripting</b><br><br />- All scripting via JavaScript<br><br />- lombardi uses server side AND client side javascript (server side via rhino)<br><br />- all coding done via OOP style javascript (Everything is an object, and must be called by its full namespace name)<br><br /><br><br /><b>Variables</b><br><br />- Can only be created in a process or a service<br><br />- organize data in groups via structures<br><br />- all variables must be referenced by its namespace.&nbsp; in teamworks, the default namespace is tw.local (for process or service) or tw.system.<br><br />- variables must be scoped and typed<br><br />- passing variables works like calling functions.&nbsp; You must declaire input and output variables, and they must have the same type.<br><br />- as a convention, name/mark variables as input and output as needed.<br><br />- BP Variable types should be upper camel case.&nbsp; Variables within a type should be lower camel case.<br><br /><br><br /><b>Screenshots</b><br><br /><br><br /><br /><a href="http://picasaweb.google.com/lh/photo/rIcyluxWKZumaly_1KxXCg"><img src="http://lh3.ggpht.com/_It8-g3_9vec/STQ6vt3En4I/AAAAAAAAAl0/hqRRI4bgKwc/s288/1_empty.jpg"></a><br><br /><br /><a href="http://picasaweb.google.com/lh/photo/y6GVEw1RkjNNlIVvOhvSbg"><img src="http://lh4.ggpht.com/_It8-g3_9vec/STQ6wOFrI0I/AAAAAAAAAl8/yAL2viDzwCg/s288/2_vacation_process.jpg"></a><br><br /><br /><a href="http://picasaweb.google.com/lh/photo/UZq5JzTa23JC7MnryCY2PQ"><img src="http://lh6.ggpht.com/_It8-g3_9vec/STQ6w98OqvI/AAAAAAAAAmE/08wFRrlgjCc/s288/3_vacation_process_checkerrors.jpg"></a><br><br /><br /><a href="http://picasaweb.google.com/lh/photo/UZq5JzTa23JC7MnryCY2PQ"><img src="http://lh6.ggpht.com/_It8-g3_9vec/STQ6w98OqvI/AAAAAAAAAmE/08wFRrlgjCc/s288/3_vacation_process_checkerrors.jpg"></a><br><br /><br /><a href="http://picasaweb.google.com/lh/photo/fkAAPXFMS5VgLP0xV5BM1g"><img src="http://lh3.ggpht.com/_It8-g3_9vec/STQ6x9ATzVI/AAAAAAAAAmU/xPEYF3-GxIU/s288/5_open_position_assignment.jpg"></a><br><br /><br /><a href="http://picasaweb.google.com/lh/photo/JsUIOH2P414FgWmD03S-dg"><img src="http://lh6.ggpht.com/_It8-g3_9vec/STQ654EWrLI/AAAAAAAAAmc/FlPD_JOklh8/s288/6_open_position_assignment_with_decisions.jpg"></a><br><br /><br /><a href="http://picasaweb.google.com/lh/photo/S28IJUXmmRT61j5NgqUW0w"><img src="http://lh6.ggpht.com/_It8-g3_9vec/STRIMoxH-DI/AAAAAAAAAmk/fzFPGe_9fro/s288/7_creating_variable_types.jpg"></a><br /><br><div id="vpu." style="padding: 1em 0pt; text-align: left;"><div id="uihn" style="padding: 1em 0pt; text-align: left;"><u><b>Day 2</b></u><br><br>Morning challenge:<br><br>Create a BPD that determines the correct route to take based on weather/time criteria using only activities and decision gateways.<br><div id="c:wx" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_2265m8hdd6_b" target="_blank"><img style="width: 320px; height: 235.916px;" src="http://docs.google.com/File?id=dcbd3xmg_2265m8hdd6_b"></a></div><br><b>Services</b><br>- as a BP, each activity should have its own service.&nbsp; they should be named the same, if possible<br>- services run "coaches" which accept user input<br>- services go into their own folder.&nbsp; For now, we are putting the services folder into the process folder.<br><br><b>Coaches(forms)</b><br>Here, we've create a service and added a single coach<br><div id="rulw" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_23hm777fr4_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_23hm777fr4_b"></a><br>Here, we've started working on the coach.&nbsp; Be sure to open the "Outline" view.&nbsp; From there, you can drag variables you've defined in your service into your coach to create a form.<br><div id="qd5e" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_24dxkt2ccz_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_24dxkt2ccz_b"></a><br>You can drag variables one by one, or you can drag the entire complex datatype onto the form and it will create fields for all variables in the type for you. (as shown in the buttons section below)<br><br><b>Buttons</b><br>-Buttons only ever execute a form "post" method.<br>-You can only ever drag a button group from the palette into the form.&nbsp; From the button group, you define specific buttons in the properties window, the presentation tab.<br>-Buttons are accessed late in javascript via the name "&lt;button_group_id&gt;_&lt;button_id&gt;"<br>-To flow from one coach to another item, you must have at least one button group.&nbsp; Without a button, you cannot assign an output line in diagram view.<br><a href="http://docs.google.com/File?id=dcbd3xmg_25dmn4c4gj_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_25dmn4c4gj_b"></a><b><br><br>Form Field Visibility (and other properties)</b><br>- Individual fields can be changed to be hidden, viewable, editable or required.&nbsp; By default, all items are set to "editable".&nbsp; In addition, you can set conditions where items can become editable, based on other values of the form changing (it generates JS to implement these features in the html rendered)<br></div></div><div id="a3ci" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_26jjgmk3cj_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_26jjgmk3cj_b"></a></div><br><div id="lw0m" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_27gvqh4xgf_b" target="_blank"><img style="width: 320px; height: 223.158px;" src="http://docs.google.com/File?id=dcbd3xmg_27gvqh4xgf_b"></a></div><br>Now that we have a form and a button, we can draw a flow to and from the coach in diagram view.<br><br><div id="l_.e" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_28dkwqx5d2_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_28dkwqx5d2_b"></a></div><br><b>Initializing a javascript object</b><br>We create a separate service just to initialize the datatype we want to use in the coach (PositionInformation in this case).&nbsp; To do that, you need to create an output variable of the type you want to initialize.&nbsp; The service is all custom server side script.&nbsp; Within the code, all we do is add code (in the implementation tab of the custom server script object) to initialize the datatype in the format "&lt;variablename&gt; = new &lt;datatype&gt;;"<br><div id="ybz9" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_29gccvn22h_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_29gccvn22h_b"></a></div><br><div id="mkfc" style="padding: 1em 0pt; text-align: left;">With that new init service defined, we can add that to the "coach service".&nbsp; Drop in a "nested service" into the coach service.&nbsp; Make sure that fires off before the coach.&nbsp; View the properties of the nested service, implementation tab, then assign the init service you created earlier.&nbsp; You'll end up with something similar to below.<br><br><a href="http://docs.google.com/File?id=dcbd3xmg_30z6r3hxqb_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_30z6r3hxqb_b"></a></div><br>now draw a flow line from the init service to the coach.&nbsp; Select the init service again, view properties and then the mapping tab. From there, you want to map the output of the init service to the output of the coach service.&nbsp; Now the variable is initialized before the coach starts.&nbsp; you can then customize the init script to pre-set variables (from a database perhaps) before the coach loads.<br><br><b>Implement Coach in Process (BPD)</b><br><br>open the BPD and select the task you want to assign the coach to (In my case, "Submit Request") and view its properties, implementation tab.<br><div id="c0td" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_313zn9tgdb_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_313zn9tgdb_b"></a></div>Assign a "Teamworks Service" and select the coach service we created previously.&nbsp; After that, we have to map variables, mapping the positionInformation output variable from the coach service to the private variable in the process.<br><div id="hjk4" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_32dqgrgmgw_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_32dqgrgmgw_b"></a><br><br>At this point, we set the next step to use the same service, without doing variable mapping (apprently we need that to do the step through the process).&nbsp; Then we can run the process and do some debugging:<br><br><div id="o5j4" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_33dkr2pzgq_b" target="_blank"><img style="width: 320px; height: 248.234px;" src="http://docs.google.com/File?id=dcbd3xmg_33dkr2pzgq_b"></a></div>Here's where it gets tricky.<br>1) Select the process window (the BPD)<br>2) Click "Run service" at the top toolbar. This kicks off a new token, that process token now lands at the first task in the top right pane.<br>3) Selecting the new task in the top right pane, start that task by clicking run when its selected.&nbsp; That should launch the "coach" in a browser (its an html form).<br>4) Fill out the the form and click submit, when the browser closes (the coach ends) you need to refresh the process in the IDE by clicking on that refrech button in the top toolbar. It should show the token has moved from your first activity to the next one.&nbsp; You can then inspect task variables in the execution state pane.&nbsp; Double clicking on the variable will display its xml value.<br></div><b>Implement Coach in Process (BPD) with gateways<br></b><br>Business rules: Between department and job level there are rules<br><br>it employee = 5000<br>it managers = 6000<br>all others = 8000<br>executive = 20000<br><br><br><b>HowTo Enable Advanced Editor<br><br><div id="td6." style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_34gq42hz5m_b" target="_blank"><img style="width: 320px; height: 293.288px;" src="http://docs.google.com/File?id=dcbd3xmg_34gq42hz5m_b"></a></div></b><br></div><br /></div><br /><br /><br>