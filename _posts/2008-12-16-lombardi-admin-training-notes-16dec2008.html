---
layout: post
title: Lombardi Admin Training Notes 16dec2008
date: '2008-12-16T09:20:00.001-08:00'
author: Bryan
tags:
- Lombardi
modified_time: '2008-12-18T09:15:27.321-08:00'
blogger_id: tag:blogger.com,1999:blog-19111454.post-1106497064491830051
blogger_orig_url: http://www.bryansgeekspeak.com/2008/12/lombardi-admin-training-notes-16dec2008.html
---

<b>Lombardi Teamworks 6.1 Administration Training Notes 16Dec2008<br><br /><br><br />Objectives</b><br><br />- Tech overview<br><br />- Installaton<br><br />- configuration<br><br />- user management<br><br /><br><br /><b>Tech Overview</b><br><br />- All configuration done in the process database as metadata (including workflows and processes, they are stored as xml in the process database)<br><br />- users all access the data via coaches that are configured using metadata in the process database<br><br />- no version control (coming in teamworks 7)<br><br />&nbsp;&nbsp;&nbsp; - might consider using a teamworks library folder for version control<br><br />- export and import in order to migrate settings from one environment to another.<br><br /><br><br /><b>Teamworks installation overview</b><br><br /><br><br />Two JVM's<br><br />1) Process Server<br><br />2) Performance Server (more of a reporting server, it does not improve performance)<br><br /><br><br />- They can be on separate boxes (and should be to improve performance) and they must use separate databases<br><br />- They must use separate databases, and you can put the databases on separate servers.&nbsp; In fact, you must create 2 databases before install for lombardi to install into.<br><br />- we do get access to the performance server tables (still need to find out how). the transactional database (process server) stores all the data as blobs, so treat it as a black box that we dont want to access directly.<br><br /><br><br /><b>System of Record<br><br /></b>- Lombardi should not be the system of record (not be the final application data that is being approved through the workflow)<br><br />- before a process ends, it should write its data to another data/archive database that tracks the data being approved/worked on.<br><br /><br><br /><b>UI Layer<br><br /></b><br><br />- sits on top of the process servers<br><br />- UI choices<br><br />&nbsp;&nbsp;&nbsp; - Authoring Environment (teamworks client)<br><br />&nbsp;&nbsp;&nbsp; - Server consoles<br><br />&nbsp;&nbsp;&nbsp; - Process Portal<br><br />&nbsp;&nbsp;&nbsp; - Teamworks for Office (infopath forms)<br><br />&nbsp;&nbsp;&nbsp; - Teamworks for SharePoint (webparts?)<br><br /><br><br /><br><br /><b>Frameworks (defined at the app server level, not teamworks itself)</b><br><br />- Connector Framework (integration framework)<br><br />&nbsp;&nbsp;&nbsp; - used to integrate to an external database (wrapping service)<br><br />&nbsp;&nbsp;&nbsp; - Connectors were used in the last class for process modeling<br><br />&nbsp;&nbsp;&nbsp; - all teamworks javascript code, all included in the default install<br><br />&nbsp;&nbsp;&nbsp; - can publish web services (SOAP) for external access<br><br /><br><br />- Messaging Framework<br><br />&nbsp;&nbsp;&nbsp; - teamworks uses a JMS Message Queue, and only allows one.&nbsp; Its called the "Teamworks event Manager"<br><br />&nbsp;&nbsp;&nbsp; - you can use SOAP, HTTP or JMS<br><br />&nbsp;&nbsp;&nbsp; - teamworks breaks it all down to JMS.<br>&nbsp;&nbsp;&nbsp; - can only send messages in (one way communications to teamworks)<br><br />&nbsp;&nbsp;&nbsp; - to listen to another message queue, you can write a services to poll the external message queue, you can use a UCA (undercover agent) wrapper to do polling.<br><br>- Security Framework<br>&nbsp;&nbsp;&nbsp; - (we will come back to this tomorrow, I think)<br><br><b>Process Server<br></b>- Made up of 3 engines<br>&nbsp;&nbsp;&nbsp; - BPD Engine<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - at the start event of a process, a new instance of that BPD (class) is initialized, variables are initialized<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - calls services. Passes variables to services and catches return variables<br>&nbsp;&nbsp;&nbsp; - Even Manager<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - JMS Message Queue<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - acts as a scheduler<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - UCA's are teamworks' way of setting up a sechedule in this event manager<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - UCA service wrapper = Event Definition (determines when it runs)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - service = Event Handler (executes the event)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - can call extermally via HTTP, SOAP or JMS (authentication and authorization not used here, knowing the URL and message format gives you access)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - you have to send messages to teamworks, it cant listen to another queue by default<br>&nbsp;&nbsp;&nbsp; - Service Engine<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - when service is called by a BPD instance and its start event is encountered, that service is initialized for that instance of the BPD and variables are initialized by the service.<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - catches variables from the BPD, returns variables back to the BPD call<br><br>- When major changes are made to a BPD or a service who has in-flight transactions, you need to somehow account for that. If you, for example, add required variables to a BPD and in-flight transactions might not have them defined, you must either create a new BPD or add a check point in to "fix" old records before the error occurs. <br><br><b>Performance Server<br></b>- You can enable/disable the performance server<br>- Process server sends definitions to the performance server (via JMS)<br>- new definitions are created as tables in the performance server database.<br>- when the state of the BPD changes, its tracked in a local table on the process server.&nbsp; On a regular basis, that data is sent to the performance server and cleared from the process server.<br>- if you enable autotracking, you should enable the performance server so that it clears out the local process server tracking table.<br><br><b>Server Installation<br></b>- no registry entries.&nbsp; Everything is installed in the teamworks folder.&nbsp; Shooting for a pure J2EE server/install environment.<br>- choose teamworks management products<br>&nbsp;&nbsp;&nbsp; - you can choose what products to install. If you break up the servers onto multiple boxes, be sure to install the process server first. Install the performance server last and point it to an existing process server.<br>- Pick the application server <br>&nbsp;&nbsp; &nbsp;- jboss is installed with teamworks, if you pick another app server, you must have it already installed)<br>- process server options<br>&nbsp;&nbsp;&nbsp; - multicast address - jboss is clustering for the multicast address. you can turn this off if you are not doing jboss clustering later after the install<br>&nbsp;&nbsp;&nbsp; - UCA Error Failure notification - you can change this user after the install<br> - performance server options<br>&nbsp;&nbsp;&nbsp; - again, make the multicast unique for the performance server cluster, which can be disabled later.<br>- Process Server Database<br>&nbsp;&nbsp;&nbsp; - databases must have been created in advance<br>- install folder<br>&nbsp;&nbsp;&nbsp; - use a name with the version number. You can have multiple versions on the same box.<br>&nbsp;&nbsp;&nbsp; - in my examples, I'm using "c:\teamworks61bsr"<br><br />- choose shortcut folder<br>&nbsp;&nbsp;&nbsp; - in my examples, I installed shortcuts in the teamworks folder on my desktop<br><br><div id="g0qw" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_71d34qgwc2_b" target="_blank"><img style="width: 320px; height: 310.974px;" src="http://docs.google.com/File?id=dcbd3xmg_71d34qgwc2_b"></a></div><br>- finish install wizard<br><br><b>Post Install Configuration</b><br>- Run database install scripts for the process server<br>&nbsp;&nbsp;&nbsp; - open a command propt and change directory to c:\teamworks61bsr\process-server\db\<br>&nbsp;&nbsp;&nbsp; - run "DBSLoad mssql"<br>&nbsp;&nbsp;&nbsp; - run "DBSpload mssql" next<br>&nbsp;&nbsp;&nbsp; - run "DBLoad mssql" last<br><br><div id="iknf" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_68dfp9skhk_b" target="_blank"><img style="width: 320px; height: 184.634px;" src="http://docs.google.com/File?id=dcbd3xmg_68dfp9skhk_b"></a></div><br>- Run database scripts for performance server<br>&nbsp;&nbsp;&nbsp; - run "DBSLoad mssql"<br>&nbsp;&nbsp;&nbsp; - run "DBLoad mssql"<br><br><div id="ewjs" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_69gdkk5tfc_b" target="_blank"><img style="width: 320px; height: 184.634px;" src="http://docs.google.com/File?id=dcbd3xmg_69gdkk5tfc_b"></a></div>- start the process server.<br>&nbsp;&nbsp;&nbsp; - log4j is not set to start by default.&nbsp; You can ignore that.<br><br><div id="izuu" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_70gpnpnkgc_b" target="_blank"><img style="width: 320px; height: 408.49px;" src="http://docs.google.com/File?id=dcbd3xmg_70gpnpnkgc_b"></a><br><br><br>- Run authoring client and connect to the process server.<br>&nbsp;&nbsp;&nbsp; - login as user "tw_admin" with password "tw_admin" (this is the default from an OOtB install)<br>&nbsp;&nbsp;&nbsp; - if this is the first time running eclipse, you will be prompted to accept the default working directory.&nbsp; Check "use this as default" and click "ok" to accept.<br>&nbsp;&nbsp;&nbsp; - Close the welcome screen by clicking the x in the tab to see the default teamworks library view, or click "go to workbench".&nbsp; You should see an environment similar to the screenshot below.<br><br><div id="uygo" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_72c6k6c6f8_b" target="_blank"><img style="width: 320px; height: 292.616px;" src="http://docs.google.com/File?id=dcbd3xmg_72c6k6c6f8_b"></a></div><br>- now we will import the default system library <br>&nbsp;&nbsp;&nbsp; - import "C:\Teamworks61bsr\imports\TWSystemData.zip".&nbsp; This imports all the base variable types, connectors, etc that you need to start creating new BPD's<br>&nbsp;&nbsp;&nbsp; - the import will create a new system library from the root.<br>&nbsp;&nbsp;&nbsp; - you should never modify the system library, it is maintained by lombiardi and could be changed by system upgrades.<br><div id="s4xe" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_73qg2rn9g2_b" target="_blank"><img style="width: 320px; height: 292.616px;" src="http://docs.google.com/File?id=dcbd3xmg_73qg2rn9g2_b"></a></div><div id="cii:" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_74g7k2njch_b" target="_blank"><img style="width: 320px; height: 292.616px;" src="http://docs.google.com/File?id=dcbd3xmg_74g7k2njch_b"></a></div><div id="ey-p" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_759hwkxbgd_b" target="_blank"><img style="width: 320px; height: 292.616px;" src="http://docs.google.com/File?id=dcbd3xmg_759hwkxbgd_b"></a><br><br>- now we can setup the client for other developers to use to connect to the server. <br>&nbsp;&nbsp;&nbsp; - the client does not need to be installed, just copied the directories "C:\Teamworks61bsr\ae-eclipse" and "C:\Teamworks61bsr\java", so long as they drop it in the same folder path. <br>&nbsp;&nbsp;&nbsp; - in the eclipse.ini file you can change the default configuration of the client. You can force it to connect to any server you want in this config file.<br>&nbsp;&nbsp;&nbsp; - on the end user machine, the path must be the same as the one you used from your server install.&nbsp; For example, in this case everyone must copy Teamworks61bsr to c:\Teamworks61bsr on their local machine.<br><br><br><b>Validate Install (notes from the handout)<br></b><br>- Database<br>- Authoring Environment<br>- Web Application<br>&nbsp;&nbsp;&nbsp; - validate you can hit the following site (login as tw_admin when necessary)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - http://&lt;host&gt;:8081/ - for the jboss admin page<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - http://&lt;host&gt;:8081/teamworks/&nbsp; - for the teamworks admin<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; - http://&lt;host&gt;:8081/portal/ - for the teamworks portal site<br>- Logging<br>- Error Log<br><br><br><b>Add custom classpaths and set custom JVM settings, if necessary<br><br /></b>&nbsp;&nbsp;&nbsp; - you can customize these settings for the process server and performance server separately. <b><br><br />&nbsp;&nbsp;&nbsp; - </b>C:\Teamworks61bsr\process-server\startup\wrapper.conf&nbsp; for the process server and C:\Teamworks61bsr\performance-server\startup\wrapper.conf for the performance server<br><br />&nbsp;&nbsp;&nbsp; - you can change/add classpaths in this file<br><br />&nbsp;&nbsp;&nbsp; - Lombardi recommends setting the max/min memory to 1gig<b> </b>(1024 meg).&nbsp; The max must at least match the min, cant be less.<br><br />&nbsp;&nbsp;&nbsp; - under NT services, you can change the service name/information to match this version of the install simply for readability<br>&nbsp;&nbsp;&nbsp; - if you changed a config in this file, you should restart the service for the changes to take effect.<br>&nbsp;&nbsp;&nbsp; - Since 2 JVM's will be running, if you want to tell them appart, you can do that by copying the java.exe for each JVM that should run: tw61_process_java.exe and tw61_performance_java.exe in the folder "C:\Teamworks61bsr\java\bin". Update the first line of the wraper.conf file to use the java exe that matches (without the .exe extension) then restart the service.<br><br><br><b>Install as a Service<br></b>- run C:\Teamworks61bsr\process-server\installProcessServerService.cmd to install the service. The verstion name can be changed in the config file mentioned above ( C:\Teamworks61bsr\process-server\startup\wrapper.conf )<br>- check to see that the service is now listed in the services applet.<br>- make sure to close your command prompt running the service, if its currently running. Then try starting the NT service and connecting via the authoring client.<br><br><div id="xbeo" style="padding: 1em 0pt; text-align: left;"><a href="http://docs.google.com/File?id=dcbd3xmg_76g7w2xdgj_b" target="_blank"><img style="width: 320px; height: 247.774px;" src="http://docs.google.com/File?id=dcbd3xmg_76g7w2xdgj_b"></a></div><br></div></div><br>