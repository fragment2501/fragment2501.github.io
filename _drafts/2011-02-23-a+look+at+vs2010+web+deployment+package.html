---
layout: post
title: A Look At VS2010 Web Deployment Package
date: '2011-02-23T09:27:00.001-08:00'
author: Bryan
tags:
- ".NET"
modified_time: '2011-02-23T10:15:10.206-08:00'
blogger_id: tag:blogger.com,1999:blog-19111454.post-2870696976321698620
---

One thing that still drives me crazy about .NET is the idea of deploying a project to multiple environments (dev, test, staging and production) in an automated, repeatable way.  Just about every project type in VS2010 has the "build" command to generate assemblies and resources that need to get deployed to a destination environment, but the default build process does not handle things like updating the web.config, url paths to web references, or really any other configuration info that happens to be environment specific.<br /><br />Lets stick with something that should be pretty straight forward since Microsoft owns and built both the development tools and the service we want to deploy to - IIS Web Application projects in VS2010 >_> At first, I looked at VS2010 and all those awesome code generating features they have right out of the box, and I thought "this is going to be easy! I bet you just click a button and end up with something like a java .war file!" and it was even -easier- to deploy to my local dev environment.  Hell, you can just click "run" and in most cases everything runs fine in VS2010's debug environment!  Awesome! But thats where the awesomeness stops.  Actually deploying the project to -another- server from scratch is suddenly becomes a challenge.  Using the "Deploy" button only moves files to a destination server - and you need direct access to the server's filesystem to use it. What if you need to create an actual deployment package that you hand off to a sysadmin to install on a target server? how in the world do you do that?  None of the options came anywhere close to creating an IIS website or application pool for me, for instance.  But arent these all microsoft tools? Shouldnt this functionality be there? You would think these are all basic things that should be available in VS2010 out of the box...<br /><br />Anyway, At first glance (and having no prior experience to deploying a .NET web application project) my only real workable solution was to manually deploy everything. For each environment I would create a build configuration for it in VS2010 (though, at first it didnt seem to matter much) run a build for that specific configuration I wanted to deploy to, copy the resulting output files into a new directory, hack up things like the web.config to reflect the settings in your target environment (connection strings, etc).  Then manually deploy files to the target server wwwroot path for my site and then manually place assemblies into the GAC when necessary.  Oh, and if you need to connect to oracle using .NET, thats a whole extra nightmare of configurations and deployment issues ... but I wont botehr getting into that here xD<br /><br />Anyway, all that goo I performed by hand should be automated.  In the world of java, I know most people use ANT to help automate builds for specific targets, so that was the first thing I started looking for in VS2010.  I ended up looking at the MSBuild options/hooks in VS2010 ... and I laughed.  You can create .bat files (...what? .bat files? from dos days? really?) to help automate build tasks and you can create separate build .bat files for each environment you want to deploy too.  But before heading down that path, I was determined to find another solution - I mean, microsoft typically tries to create GUIs to help developers do this kind of thing, right?  So as my search continued for a better deployment tool, I stumbled on a few things that would help ... to automate deployment -specifically- for a .NET web application project: VS2010 actually has built in support for <a href="http://msdn.microsoft.com/en-us/library/dd465318.aspx">Web.config Transforms</a> and then there is this other wacky idea of a <a href="http://msdn.microsoft.com/en-us/library/dd465323.aspx">Web Deployment Package</a> ... which requires an add on tool to be installed on all your target servers (..what?!). <br /><br /><b>Web.config Transforms</b><br /><br /><b>Web Deployment Package</b><br /><br />"What? really? I have to install extra goo on my servers? its not a feature in Windows Server 2008R2?" Thats right! To use the web deployment package you have to battle your sysadmins to allow installing this tool on all your target servers to use web deployment packages. Lets take a look at how to get this thing setup, then we can look at how to use it, and what you need to think about -before- you even create your web project in order to use it properly.